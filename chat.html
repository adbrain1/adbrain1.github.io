<!DOCTYPE html><html lang="en"><head>  <meta charset="UTF-8" />  <meta name="viewport" content="width=device-width, initial-scale=1.0" />  <title>Abdul Rafay‚Äôs Adventures</title>  <link rel="icon" type="image/png" href="./favicon.png">
  <meta name="theme-color" content="#2e0249">  <meta property="og:title" content="Abdul Rafay‚Äôs Adventures">  <meta property="og:description" content="Live chat with me!">  <meta property="og:image" content="https://www.rafaytravelsworldwide.com//link-to-a-cool-photo.jpg">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />  <meta http-equiv="Pragma" content="no-cache" />  <meta http-equiv="Expires" content="0" />
  <link rel="preconnect" href="https://fonts.googleapis.com">  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=Nunito:wght@400;700&display=swap" rel="stylesheet">  <link rel="stylesheet" href="style.css">
  <style>
    /* DESKTOP STYLES (STAY THE SAME) */
    #messages { 
      height: 600px !important; 
      max-height: 65vh; 
      overflow-y: auto; 
      display: flex; 
      flex-direction: column; 
      padding: 15px; 
      background: rgba(0,0,0,0.05);
    }
    .chat-portal { display: flex; flex-direction: column; height: 100%; }
    .view-container { max-width: 1100px; margin: 0 auto; }
    
    .edited-label { font-size: 0.6rem; opacity: 0.7; font-style: italic; margin-left: 5px; color: inherit; display: inline-block; }
    .edit-btn { display: inline-block; font-size: 0.65rem; color: #fff; background: #333; cursor: pointer; margin-left: 10px; padding: 2px 8px; border-radius: 4px; text-transform: uppercase; font-weight: bold; border: none; vertical-align: middle; }
    .ts { display: block; margin-top: 6px; font-size: 0.75rem; font-weight: 700; color: #111 !important; }
    
    .emoji-bar { display: flex; gap: 12px; padding: 10px; background: rgba(255,255,255,0.05); overflow-x: auto; border-top: 1px solid rgba(255,255,255,0.1); white-space: nowrap; scrollbar-width: none; }
    .emoji-bar::-webkit-scrollbar { display: none; }
    .emoji-item { cursor: pointer; font-size: 1.4rem; flex-shrink: 0; }
    
    .chat-header { display: flex; flex-direction: column; align-items: flex-start; padding-bottom: 10px; }
    .delete-btn { margin-top: 10px; padding: 5px 15px; font-size: 0.8rem; }

    /* MOBILE FIXES (ONLY TARGETS PHONE SCREENS) */
    @media (max-width: 768px) {
      /* Fix 1: Ensure container is centered and not bleeding off-left */
      .view-container { 
        padding: 0 10px !important; 
        margin: 0 auto !important; 
        width: 100% !important; 
        box-sizing: border-box;
      }
      .card { 
        margin: 0 !important; 
        width: 100% !important; 
        border-radius: 10px;
      }
      .content { padding: 10px !important; }

      /* Fix 2: Message Bubbles adjustment */
      #messages { 
        padding: 10px !important; 
        height: 450px !important; /* Slightly shorter for mobile usability */
      }
      .msg { 
        max-width: 90% !important; 
        margin-left: 5px !important; 
      }

      /* Fix 3: Emoji bar scrolling */
      .emoji-bar { 
        justify-content: flex-start; 
        padding: 10px; 
        gap: 15px; 
        overflow-x: auto !important; 
        display: flex !important;
      }

      /* Fix 4: Input box and Send button padding */
      .chat-portal div[style*="flex"] {
        padding: 10px !important;
        gap: 5px !important;
      }
      #chatInput {
        width: 70% !important;
        font-size: 16px; /* Prevents auto-zoom on iPhone */
      }
    }
  </style>
</head>
<body>  <button id="hamburgerBtn" class="hamburger">    &#9776;  </button>
  <div class="menu-overlay" id="menuOverlay"></div>
  <div class="slide-menu" id="slideMenu">    <button class="close-menu" id="closeMenuBtn">&times;</button>    <a href="index.html" class="menu-item">Home</a>    <a href="stories.html" class="menu-item">My Stories</a>    <a href="learning.html" class="menu-item">Fun Learning</a>    <a href="videos.html" class="menu-item">My Videos</a>    <a href="chat.html" class="menu-item">Chat</a>    <a href="about.html" class="menu-item">About Me</a>  </div>
  <div class="flags-bar">    <div class="flags-track" id="flagsTrack"></div>  </div>
  <div class="top-wrapper">    <div class="top-info">      <span class="location-text">Where I now live</span>      <div class="region"><img src="https://flagcdn.com/w20/gb.png" alt="UK Flag"></div>      <div class="time" id="time-uk"></div>      <div class="date" id="date-uk"></div>      <div class="weather" id="weather-uk">Loading‚Ä¶</div>    </div>
    <div class="top-info">      <span class="location-text">Where I came from</span>      <div class="region"><img src="https://flagcdn.com/w20/pk.png" alt="Pakistan Flag"></div>      <div class="time" id="time-pk"></div>      <div class="date" id="date-pk"></div>      <div class="weather" id="weather-pk">Loading‚Ä¶</div>    </div>  </div>

  <div class="view-container">    <div class="card" id="mainCard">      <div class="content">        <div class="chat-header">            <h1 style="margin:0; color:var(--accent);">Chat with Yum!</h1>            <button id="adminDelete" class="delete-btn" style="display:none;" onclick="clearHistory()">Clear History</button>        </div>
        <div class="chat-portal">          <div id="chatNameSection">            <input type="text" id="userName" class="chat-input" placeholder="Your name...">            <button class="chat-btn" onclick="startChat()" style="margin-top:10px; width:100%;">Join Chat Room</button>          </div>                    <div id="chatBox">
            <div id="onlineStatus" class="online-indicator" style="display:none;">Online: <span id="userList">...</span></div>
            <div id="messages"></div>
            <div class="emoji-bar">
                <span class="emoji-item" onclick="pressEmoji('üòä')">üòä</span><span class="emoji-item" onclick="pressEmoji('üòÇ')">üòÇ</span>
                <span class="emoji-item" onclick="pressEmoji('‚ù§Ô∏è')">‚ù§Ô∏è</span><span class="emoji-item" onclick="pressEmoji('üëç')">üëç</span>
                <span class="emoji-item" onclick="pressEmoji('üî•')">üî•</span><span class="emoji-item" onclick="pressEmoji('‚ú®')">‚ú®</span>
                <span class="emoji-item" onclick="pressEmoji('üôå')">üôå</span><span class="emoji-item" onclick="pressEmoji('üíØ')">üíØ</span>
                <span class="emoji-item" onclick="pressEmoji('üòé')">üòé</span><span class="emoji-item" onclick="pressEmoji('üéâ')">üéâ</span>
            </div>
            <div style="display:flex; padding:12px; gap:10px; background: rgba(0,0,0,0.2); align-items: center;">
              <input type="text" id="chatInput" class="chat-input" placeholder="Type a message...">              <button class="chat-btn" onclick="sendMessage()">Send</button>
            </div>          </div>        </div>      </div>      <div class="image-panel"><img src="./20250809_120138.jpg"></div>    </div>  </div>

  <audio id="sendSound" src="https://assets.mixkit.co/active_storage/sfx/2354/2354-preview.mp3" preload="auto"></audio>

  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

  <script>
    /* (Firebase and logic script remains exactly the same as previous functional version) */
    const firebaseConfig = { apiKey: "AIzaSyBWwSAuseEPvBoFiPHaZoFNiLV6xhBSeAJI", authDomain: "abdulrafaychat.firebaseapp.com", projectId: "abdulrafaychat", storageBucket: "abdulrafaychat.firebasestorage.app", messagingSenderId: "1078346470566", appId: "1:1078346470566:web:489a0d85d89216e5e39067", databaseURL: "https://abdulrafaychat-default-rtdb.firebaseio.com" };
    firebase.initializeApp(firebaseConfig); const db = firebase.database(); let currentUserName = ""; let isInitialLoad = true;
    function startChat() { const name = document.getElementById('userName').value.trim(); if (!name) return alert("Please enter a name"); currentUserName = name; document.getElementById('chatNameSection').style.display = 'none'; document.getElementById('chatBox').style.display = 'flex'; document.getElementById('adminDelete').style.display = 'block'; document.getElementById('onlineStatus').style.display = 'block'; const onlineRef = db.ref('online_users/' + name); onlineRef.set(true); onlineRef.onDisconnect().remove(); db.ref('online_users').on('value', (snap) => { const users = snap.val() ? Object.keys(snap.val()) : []; document.getElementById('userList').innerText = users.join(", "); }); db.ref("messages").on("child_added", (snap) => { const data = snap.val(); appendMessage(data.user, data.text, data.user === currentUserName, data.time, snap.key); if(!isInitialLoad) { document.getElementById('sendSound').play().catch(()=>{}); } }); db.ref("messages").on("child_changed", (snap) => { const key = snap.key; const newData = snap.val(); const msgContainer = document.querySelector(`[data-key="${key}"] .msg-text`); if(msgContainer) { const textSpan = msgContainer.querySelector('.msg-text-content'); if(textSpan) textSpan.innerText = newData.text; if(!msgContainer.querySelector('.edited-label')) { const small = document.createElement('span'); small.className = 'edited-label'; small.innerText = '(edited)'; msgContainer.appendChild(small); } } }); db.ref("messages").on("child_removed", (snap) => { const el = document.querySelector(`[data-key="${snap.key}"]`); if(el) el.remove(); }); db.ref("messages").once("value", () => { isInitialLoad = false; }); }
    function pressEmoji(emoji) { const input = document.getElementById('chatInput'); input.value += emoji; input.focus(); }
    function sendMessage() { const input = document.getElementById('chatInput'); if (!input.value.trim()) return; const utcTime = new Date().getTime(); db.ref("messages").push().set({ user: currentUserName, text: input.value, time: utcTime }); input.value = ""; }
    function appendMessage(user, text, isMe, time, key) { let fullTimeStr = ""; if(time) { const date = new Date(time); const dPart = date.toLocaleDateString([], { day:'numeric', month:'short' }); const tPart = date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', hour12: true }); fullTimeStr = dPart + " " + tPart; } const div = document.createElement('div'); div.className = isMe ? 'msg me' : 'msg'; div.setAttribute('data-key', key); const editButtonHtml = isMe ? `<button class="edit-btn" onclick="editMessage('${key}')">Edit</button>` : ''; div.innerHTML = `<strong>${user}</strong><br><span class="msg-text"><span class="msg-text-content">${text}</span></span><span class="ts">${fullTimeStr}${editButtonHtml}</span>`; const box = document.getElementById('messages'); box.appendChild(div); box.scrollTop = box.scrollHeight; }
    function editMessage(key) { const msgContent = document.querySelector(`[data-key="${key}"] .msg-text-content`); const currentText = msgContent.innerText; const newText = prompt("Update your message:", currentText); if(newText && newText.trim() !== "" && newText !== currentText) { db.ref("messages/" + key).update({ text: newText }); } }
    function clearHistory() { const pw = prompt("Enter Admin Password:"); if (pw === "71797179") { if (confirm("Delete ALL messages?")) { db.ref("messages").remove(); alert("History Deleted."); } } }
    /* Weather/Menu Logic (Omitted for brevity, keep your existing logic here) */
  </script>
</body>
</html>
